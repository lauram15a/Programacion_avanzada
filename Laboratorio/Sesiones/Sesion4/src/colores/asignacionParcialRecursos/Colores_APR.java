/*ASIGNACIÓN PARCIAL DE RECUSOS: Cada proceso va adquiriendo 
(y bloqueando) los recursos a medida que los va necesitando.
*
*
*ASIGNACIÓN COMPLETA DE LOS RECURSOS A UTILIZAR
*
*Un pintor solo actúa si dispone de los dos colores que 
necesita para la mezcla. Si no puede tener los dos a la vez, 
espera.
*Para ello, sustituimos los métodos tomaColor(i) y 
dejaColor(i) por tomaColores(i), que devuelve un array con 
los dos colores  i ,i+1  y  dejaColores(i) que libera los dos
colores.
*
*Ahora el sistema no se bloquea, pero se produce otro fenómeno 
igualmente indeseable en concurrencia, la inanición (starvation). 
Podremos observar cómo hay uno o dos hilos pintores que no dejan 
de pintar sus respectivos botones, mientras los otros los tienen 
siempre pintados de negro porque nunca son capaces de terminar de 
coger sus dos colores.
*/


package colores.asignacionParcialRecursos;

import colores.*;

public class Colores_APR extends javax.swing.JFrame
{
    /** Creates new form Coloress */
    public Colores_APR()
    {
        initComponents();
        Paleta_APR mezclas = new Paleta_APR();
        Pintor_APR p1 = new Pintor_APR(jButton1,mezclas,0);
        Pintor_APR p2 = new Pintor_APR(jButton2,mezclas,1);
        Pintor_APR p3 = new Pintor_APR(jButton3,mezclas,2);
        Pintor_APR p4 = new Pintor_APR(jButton4,mezclas,3);
        p1.start();
        p2.start();
        p3.start();
        p4.start();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jButton1 = new javax.swing.JButton();
        jButton2 = new javax.swing.JButton();
        jButton3 = new javax.swing.JButton();
        jButton4 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Colores");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(52, 52, 52)
                .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 127, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(61, 61, 61)
                .addComponent(jButton2, javax.swing.GroupLayout.PREFERRED_SIZE, 127, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 64, Short.MAX_VALUE)
                .addComponent(jButton3, javax.swing.GroupLayout.PREFERRED_SIZE, 127, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(55, 55, 55)
                .addComponent(jButton4, javax.swing.GroupLayout.PREFERRED_SIZE, 127, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(60, 60, 60))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(68, 68, 68)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 118, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jButton4, javax.swing.GroupLayout.PREFERRED_SIZE, 118, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jButton3, javax.swing.GroupLayout.PREFERRED_SIZE, 118, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jButton2, javax.swing.GroupLayout.PREFERRED_SIZE, 118, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(114, Short.MAX_VALUE))
        );

        setSize(new java.awt.Dimension(816, 338));
        setLocationRelativeTo(null);
    }// </editor-fold>                        

    /**
    * @param args the command line arguments
    */
    public static void main(String args[])
    {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new Colores_APR().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify                     
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JButton jButton3;
    private javax.swing.JButton jButton4;
    // End of variables declaration                   
}
